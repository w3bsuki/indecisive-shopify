import{g as v}from"./chunk-MWVM4TYO-bKUcYSnf.js";import{K as E}from"./chunk-6HTZNHPT-HdCSFFuD.js";import{b as r,u as F}from"./chunk-4TC5YS65-DbRS9JYZ.js";import{a2 as S,af as B,b as y,R as I,dj as T,j as e,H as w,a8 as N,a9 as R,dm as H,t as b,w as l,x as L,B as f}from"./index-DvK3t9V2.js";import{C as _}from"./currency-input-BeozRcCv.js";import"./prompt-CAU7MXNM.js";import"./index.esm-B5-3DyJ3.js";var z=S({limit:B().min(0).optional().nullable()}),K=({campaign:s})=>{var u;const{t}=y(),{handleSuccess:d}=F(),n=N({defaultValues:{limit:((u=s==null?void 0:s.budget)==null?void 0:u.limit)||void 0},resolver:R(z)}),{mutateAsync:c,isPending:m}=H(s.id),C=n.handleSubmit(async i=>{await c({budget:{limit:i.limit?i.limit:null}},{onSuccess:({campaign:a})=>{b.success(t("campaigns.edit.successToast",{name:a.name})),d()},onError:a=>{b.error(a.message)}})});return e.jsx(r.Form,{form:n,children:e.jsxs(E,{onSubmit:C,className:"flex flex-1 flex-col",children:[e.jsx(r.Body,{children:e.jsx("div",{className:"flex flex-col gap-y-4",children:e.jsx(l.Field,{control:n.control,name:"limit",render:({field:{onChange:i,value:a,...x}})=>{var j,g,h,p;return e.jsxs(l.Item,{className:"basis-1/2",children:[e.jsx(l.Label,{children:t("campaigns.budget.fields.limit")}),e.jsx(l.Control,{children:((j=s.budget)==null?void 0:j.type)==="spend"?e.jsx(_,{min:0,onValueChange:o=>i(o?parseInt(o):null),code:(g=s.budget)==null?void 0:g.currency_code,symbol:(h=s.budget)!=null&&h.currency_code?v((p=s.budget)==null?void 0:p.currency_code):"",...x,value:a||void 0}):e.jsx(L,{min:0,...x,value:a,onChange:o=>{i(o.target.value===""?null:parseInt(o.target.value))}},"usage")}),e.jsx(l.ErrorMessage,{})]})}})})}),e.jsx(r.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(r.Close,{asChild:!0,children:e.jsx(f,{variant:"secondary",size:"small",children:t("actions.cancel")})}),e.jsx(f,{isLoading:m,type:"submit",variant:"primary",size:"small",children:t("actions.save")})]})})]})})},k=()=>{const{t:s}=y(),{id:t}=I(),{campaign:d,isLoading:n,isError:c,error:m}=T(t);if(c)throw m;return e.jsxs(r,{children:[e.jsx(r.Header,{children:e.jsx(r.Title,{asChild:!0,children:e.jsx(w,{children:s("campaigns.budget.edit.header")})})}),!n&&d&&e.jsx(K,{campaign:d})]})};export{k as Component};
