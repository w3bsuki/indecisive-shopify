import{r as N,aM as he}from"./index-CfFT3zi1.js";var l=function(){return l=Object.assign||function(r){for(var a,t=1,o=arguments.length;t<o;t++){a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])}return r},l.apply(this,arguments)};function fe(e,r){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(a[t[o]]=e[t[o]]);return a}function V(e,r,a){if(a||arguments.length===2)for(var t=0,o=r.length,n;t<o;t++)(n||!(t in r))&&(n||(n=Array.prototype.slice.call(r,0,t)),n[t]=r[t]);return e.concat(n||Array.prototype.slice.call(r))}var F=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},Le={k:1e3,m:1e6,b:1e9},Ue=function(e,r){r===void 0&&(r=".");var a=new RegExp("(\\d+(".concat(F(r),"\\d*)?)([kmb])$"),"i"),t=e.match(a);if(t){var o=t[1],n=t[3],i=Le[n.toLowerCase()];return Number(o.replace(r,"."))*i}},Ge=function(e,r){r===void 0&&(r=",");var a=new RegExp(F(r),"g");return e.replace(a,"")},Me=function(e,r){var a=F(r.join("")),t=new RegExp("[^\\d".concat(a,"]"),"gi");return e.replace(t,"")},ce=function(e){var r=e.value,a=e.groupSeparator,t=a===void 0?",":a,o=e.decimalSeparator,n=o===void 0?".":o,i=e.allowDecimals,u=i===void 0?!0:i,c=e.decimalsLimit,D=c===void 0?2:c,E=e.allowNegativeValue,v=E===void 0?!0:E,g=e.disableAbbreviations,K=g===void 0?!1:g,P=e.prefix,S=P===void 0?"":P,O=e.transformRawValue,I=O===void 0?function($){return $}:O,f=I(r);if(f==="-")return f;var m=K?[]:["k","m","b"],x=new RegExp("((^|\\D)-\\d)|(-".concat(F(S),")")),H=x.test(f),C=RegExp("(\\d+)-?".concat(F(S))).exec(r)||[],k=C[0],Q=C[1],X=S?k?f.replace(k,"").concat(Q):f.replace(S,""):f,Y=Ge(X,t),j=Me(Y,V([t,n],m,!0)),B=j;if(!K){if(m.some(function($){return $===j.toLowerCase().replace(n,"")}))return"";var Z=Ue(j,n);Z&&(B=String(Z))}var L=H&&v?"-":"";if(n&&B.includes(n)){var U=j.split(n),_=U[0],G=U[1],M=D&&G?G.slice(0,D):G,ee=u?"".concat(n).concat(M):"";return"".concat(L).concat(_).concat(ee)}return"".concat(L).concat(B)},$e=function(e,r,a){if(a!==void 0&&e.length>1){if(a===0)return e.replace(r,"");if(e.includes(r)){var t=e.split(r),o=t[0],n=t[1];if(n.length===a)return e;if(n.length>a)return"".concat(o).concat(r).concat(n.slice(0,a))}var i=e.length>a?new RegExp("(\\d+)(\\d{".concat(a,"})")):new RegExp("(\\d)(\\d+)"),u=e.match(i);if(u){var o=u[1],n=u[2];return"".concat(o).concat(r).concat(n)}}return e},xe=function(e,r){var a=r.groupSeparator,t=a===void 0?",":a,o=r.decimalSeparator,n=o===void 0?".":o,i=new RegExp("\\d([^".concat(F(t)).concat(F(n),"0-9]+)")),u=e.match(i);return u?u[1]:void 0},J=function(e){var r=e.value,a=e.decimalSeparator,t=e.intlConfig,o=e.decimalScale,n=e.prefix,i=n===void 0?"":n,u=e.suffix,c=u===void 0?"":u;if(r===""||r===void 0)return"";if(r==="-")return"-";var D=new RegExp("^\\d?-".concat(i?"".concat(F(i),"?"):"","\\d")).test(r),E=a!=="."?Te(r,a,D):r;a&&a!=="-"&&E.startsWith(a)&&(E="0"+E);var v=t||{},g=v.locale,K=v.currency,P=fe(v,["locale","currency"]),S=l(l({},P),{minimumFractionDigits:o||0,maximumFractionDigits:20}),O=t?new Intl.NumberFormat(g,l(l({},S),K&&{style:"currency",currency:K})):new Intl.NumberFormat(void 0,S),I=O.formatToParts(Number(E)),f=We(I,e),m=xe(f,l({},e)),x=r.slice(-1)===a?a:"",H=E.match(RegExp("\\d+\\.(\\d+)"))||[],C=H[1];return o===void 0&&C&&a&&(f.includes(a)?f=f.replace(RegExp("(\\d+)(".concat(F(a),")(\\d+)"),"g"),"$1$2".concat(C)):m&&!c?f=f.replace(m,"".concat(a).concat(C).concat(m)):f="".concat(f).concat(a).concat(C)),c&&x?"".concat(f).concat(x).concat(c):m&&x?f.replace(m,"".concat(x).concat(m)):m&&c?f.replace(m,"".concat(x).concat(c)):[f,x,c].join("")},Te=function(e,r,a){var t=e;return r&&r!=="."&&(t=t.replace(RegExp(F(r),"g"),"."),a&&r==="-"&&(t="-".concat(t.slice(1)))),t},We=function(e,r){var a=r.prefix,t=r.groupSeparator,o=r.decimalSeparator,n=r.decimalScale,i=r.disableGroupSeparators,u=i===void 0?!1:i;return e.reduce(function(c,D,E){var v=D.type,g=D.value;return E===0&&a?v==="minusSign"?[g,a]:v==="currency"?V(V([],c,!0),[a],!1):[a,g]:v==="currency"?a?c:V(V([],c,!0),[g],!1):v==="group"?u?c:V(V([],c,!0),[t!==void 0?t:g],!1):v==="decimal"?n!==void 0&&n===0?c:V(V([],c,!0),[o!==void 0?o:g],!1):v==="fraction"?V(V([],c,!0),[n!==void 0?g.slice(0,n):g],!1):V(V([],c,!0),[g],!1)},[""]).join("")},He={currencySymbol:"",groupSeparator:"",decimalSeparator:"",prefix:"",suffix:""},qe=function(e){var r=e||{},a=r.locale,t=r.currency,o=fe(r,["locale","currency"]),n=a?new Intl.NumberFormat(a,l(l({},o),t&&{currency:t,style:"currency"})):new Intl.NumberFormat;return n.formatToParts(1000.1).reduce(function(i,u,c){return u.type==="currency"?c===0?l(l({},i),{currencySymbol:u.value,prefix:u.value}):l(l({},i),{currencySymbol:u.value,suffix:u.value}):u.type==="group"?l(l({},i),{groupSeparator:u.value}):u.type==="decimal"?l(l({},i),{decimalSeparator:u.value}):i},He)},we=function(e){return RegExp(/\d/,"gi").test(e)},ze=function(e,r,a){if(a===void 0||r===""||r===void 0||e===""||e===void 0)return e;if(!e.match(/\d/g))return"";var t=e.split(r),o=t[0],n=t[1];if(a===0)return o;var i=n||"";if(i.length<a)for(;i.length<a;)i+="0";else i=i.slice(0,a);return"".concat(o).concat(r).concat(i)},Je=function(e){var r=e.selectionStart,a=e.value,t=e.lastKeyStroke,o=e.stateValue,n=e.groupSeparator,i=r,u=a;if(o&&i){var c=a.split("");return t==="Backspace"&&o[i]===n&&(c.splice(i-1,1),i-=1),t==="Delete"&&o[i]===n&&(c.splice(i,1),i+=1),u=c.join(""),{modifiedValue:u,cursorPosition:i}}return{modifiedValue:u,cursorPosition:r}},Qe=N.forwardRef(function(e,r){var a=e.allowDecimals,t=a===void 0?!0:a,o=e.allowNegativeValue,n=o===void 0?!0:o,i=e.id,u=e.name,c=e.className,D=e.customInput,E=e.decimalsLimit,v=e.defaultValue,g=e.disabled,K=g===void 0?!1:g,P=e.maxLength,S=e.value,O=e.onValueChange,I=e.fixedDecimalLength,f=e.placeholder,m=e.decimalScale,x=e.prefix,H=e.suffix,C=e.intlConfig,k=e.step,Q=e.min,X=e.max,Y=e.disableGroupSeparators,j=Y===void 0?!1:Y,B=e.disableAbbreviations,Z=B===void 0?!1:B,L=e.decimalSeparator,U=e.groupSeparator,_=e.onChange,G=e.onFocus,M=e.onBlur,ee=e.onKeyDown,$=e.onKeyUp,Ve=e.transformRawValue,se=e.formatValueOnBlur,Ee=se===void 0?!0:se,Re=fe(e,["allowDecimals","allowNegativeValue","id","name","className","customInput","decimalsLimit","defaultValue","disabled","maxLength","value","onValueChange","fixedDecimalLength","placeholder","decimalScale","prefix","suffix","intlConfig","step","min","max","disableGroupSeparators","disableAbbreviations","decimalSeparator","groupSeparator","onChange","onFocus","onBlur","onKeyDown","onKeyUp","transformRawValue","formatValueOnBlur"]);if(L&&we(L))throw new Error("decimalSeparator cannot be a number");if(U&&we(U))throw new Error("groupSeparator cannot be a number");var re=N.useMemo(function(){return qe(C)},[C]),p=L||re.decimalSeparator||"",T=U||re.groupSeparator||"";if(p&&T&&p===T&&j===!1)throw new Error("decimalSeparator cannot be the same as groupSeparator");var q={decimalSeparator:p,groupSeparator:T,disableGroupSeparators:j,intlConfig:C,prefix:x||re.prefix,suffix:H},ne={decimalSeparator:p,groupSeparator:T,allowDecimals:t,decimalsLimit:E||I||2,allowNegativeValue:n,disableAbbreviations:Z,prefix:x||re.prefix,transformRawValue:Ve},pe=N.useState(function(){return v!=null?J(l(l({},q),{decimalScale:m,value:String(v)})):S!=null?J(l(l({},q),{decimalScale:m,value:String(S)})):""}),y=pe[0],z=pe[1],de=N.useState(!1),oe=de[0],Oe=de[1],ve=N.useState(0),ie=ve[0],ue=ve[1],me=N.useState(0),ge=me[0],Ce=me[1],Se=N.useState(null),Ne=Se[0],De=Se[1],A=N.useRef(null);N.useImperativeHandle(r,function(){return A.current});var be=function(s,h){Oe(!0);var b=Je({selectionStart:h,value:s,lastKeyStroke:Ne,stateValue:y,groupSeparator:T}),R=b.modifiedValue,w=b.cursorPosition,d=ce(l({value:R},ne));if(!(P&&d.replace(/-/g,"").length>P)){if(d===""||d==="-"||d===p){O&&O(void 0,u,{float:null,formatted:"",value:""}),z(d),ue(1);return}var W=p?d.replace(p,"."):d,ae=parseFloat(W),le=J(l({value:d},q));if(w!=null){var te=w+(le.length-s.length);te=te<=0?x?x.length:0:te,ue(te),Ce(ge+1)}if(z(le),O){var Be={float:ae,formatted:le,value:d};O(d,u,Be)}}},Fe=function(s){var h=s.target,b=h.value,R=h.selectionStart;be(b,R),_&&_(s)},ke=function(s){return G&&G(s),y?y.length:0},Ae=function(s){var h=s.target.value,b=ce(l({value:h},ne));if(b==="-"||b===p||!b){z(""),M&&M(s);return}var R=$e(b,p,I),w=ze(R,p,m!==void 0?m:I),d=p?w.replace(p,"."):w,W=parseFloat(d),ae=J(l(l({},q),{value:w}));O&&Ee&&O(w,u,{float:W,formatted:ae,value:w}),z(ae),M&&M(s)},Ke=function(s){var h=s.key;if(De(h),k&&(h==="ArrowUp"||h==="ArrowDown")){s.preventDefault(),ue(y.length);var b=S!=null?String(S):void 0,R=p&&b?b.replace(p,"."):b,w=parseFloat(R??ce(l({value:y},ne)))||0,d=h==="ArrowUp"?w+k:w-k;if(Q!==void 0&&d<Number(Q)||!n&&d<0||X!==void 0&&d>Number(X))return;var W=String(k).includes(".")?Number(String(k).split(".")[1].length):void 0;be(String(W?d.toFixed(W):d).replace(".",p))}ee&&ee(s)},Pe=function(s){var h=s.key,b=s.currentTarget.selectionStart;if(h!=="ArrowUp"&&h!=="ArrowDown"&&y!=="-"){var R=xe(y,{groupSeparator:T,decimalSeparator:p});if(R&&b&&b>y.length-R.length&&A.current){var w=y.length-R.length;A.current.setSelectionRange(w,w)}}$&&$(s)};N.useEffect(function(){S==null&&v==null&&z("")},[v,S]),N.useEffect(function(){oe&&y!=="-"&&A.current&&document.activeElement===A.current&&A.current.setSelectionRange(ie,ie)},[y,ie,A,oe,ge]);var Ie=function(){return S!=null&&y!=="-"&&(!p||y!==p)?J(l(l({},q),{decimalScale:oe?void 0:m,value:String(S)})):y},ye=l({type:"text",inputMode:"decimal",id:i,name:u,className:c,onChange:Fe,onBlur:Ae,onFocus:ke,onKeyDown:Ke,onKeyUp:Pe,placeholder:f,disabled:K,value:Ie(),ref:A},Re);if(D){var je=D;return he.createElement(je,l({},ye))}return he.createElement("input",l({},ye))});Qe.displayName="CurrencyInput";export{Qe as C,J as f};
