import{I as Ve}from"./chunk-PYIO3TDQ-D8Zv8hXV.js";import{g as T}from"./chunk-PDWBYQOW-Dmlh1vBq.js";import{c as de,D as De,I as ie,e as ze,f as $e,g as Fe,h as ue}from"./chunk-53RYGJCD-C2dEBbak.js";import{c as qe}from"./chunk-MWVM4TYO-bKUcYSnf.js";import{c as P}from"./chunk-6GU6IDUA-CDc7wW5L.js";import{K as Ke}from"./chunk-6HTZNHPT-BcSjToUL.js";import{S as I}from"./chunk-4TC5YS65-Um6ptYuI.js";import{r as h,aM as w,j as t,cP as Ge,bE as He,eE as pe,bF as Be,b8 as Ue,b9 as We,ba as Xe,bC as me,bI as Ye,bV as Ze,bK as Je,bJ as fe,b as $,cB as Qe,a8 as et,ab as tt,w as ot,v as _,H as st,T as F,B as W,ac as f,E as he,y as J,a$ as nt,D as k,C as it,o as z,W as rt,X as at,V as lt,b4 as ct,x as X,bn as M,Y as R}from"./index-CfFT3zi1.js";import{f as ee,C as dt}from"./index.esm-DbViPNyb.js";import{X as ut}from"./x-mark-mini-MvZodUZ3.js";import{T as Y}from"./Trans-9Tf8C9WY.js";import{C as V}from"./currency-input-BRRQzzSW.js";var pt=Object.defineProperty,q=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,re=(e,s,o)=>s in e?pt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,mt=(e,s)=>{for(var o in s||(s={}))ge.call(s,o)&&re(e,o,s[o]);if(q)for(var o of q(s))xe.call(s,o)&&re(e,o,s[o]);return e},ft=(e,s)=>{var o={};for(var n in e)ge.call(e,n)&&s.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&q)for(var n of q(e))s.indexOf(n)<0&&xe.call(e,n)&&(o[n]=e[n]);return o};const ve=h.forwardRef((e,s)=>{var o=e,{color:n="currentColor"}=o,i=ft(o,["color"]);return h.createElement("svg",mt({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},i),h.createElement("path",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.056 1.944h4v4M13.056 1.944l-4 4M1.944 9.056v4h4M1.944 13.056l4-4"}))});ve.displayName="ArrowsPointingOut";var ht=Object.defineProperty,K=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,ae=(e,s,o)=>s in e?ht(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,gt=(e,s)=>{for(var o in s||(s={}))be.call(s,o)&&ae(e,o,s[o]);if(K)for(var o of K(s))je.call(s,o)&&ae(e,o,s[o]);return e},xt=(e,s)=>{var o={};for(var n in e)be.call(e,n)&&s.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&K)for(var n of K(e))s.indexOf(n)<0&&je.call(e,n)&&(o[n]=e[n]);return o};const Ce=h.forwardRef((e,s)=>{var o=e,{color:n="currentColor"}=o,i=xt(o,["color"]);return h.createElement("svg",gt({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},i),h.createElement("path",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.5 13.945a6.444 6.444 0 1 0 0-12.89 6.444 6.444 0 0 0 0 12.89M8.167 5.5h2.666M4.167 5.5h1.777M5.944 3.944v3.111M9.056 9.5h1.777M4.167 9.5h2.666M9.056 7.944v3.111"}))});Ce.displayName="CircleSliders";var N="Accordion",vt=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[te,bt,jt]=Ge(N),[H,ro]=He(N,[jt,pe]),oe=pe(),ye=w.forwardRef((e,s)=>{const{type:o,...n}=e,i=n,a=n;return t.jsx(te.Provider,{scope:e.__scopeAccordion,children:o==="multiple"?t.jsx(wt,{...a,ref:s}):t.jsx(_t,{...i,ref:s})})});ye.displayName=N;var[_e,Ct]=H(N),[we,yt]=H(N,{collapsible:!1}),_t=w.forwardRef((e,s)=>{const{value:o,defaultValue:n,onValueChange:i=()=>{},collapsible:a=!1,...r}=e,[l,c]=me({prop:o,defaultProp:n,onChange:i});return t.jsx(_e,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:w.useCallback(()=>a&&c(""),[a,c]),children:t.jsx(we,{scope:e.__scopeAccordion,collapsible:a,children:t.jsx(Pe,{...r,ref:s})})})}),wt=w.forwardRef((e,s)=>{const{value:o,defaultValue:n,onValueChange:i=()=>{},...a}=e,[r=[],l]=me({prop:o,defaultProp:n,onChange:i}),c=w.useCallback(p=>l((u=[])=>[...u,p]),[l]),d=w.useCallback(p=>l((u=[])=>u.filter(m=>m!==p)),[l]);return t.jsx(_e,{scope:e.__scopeAccordion,value:r,onItemOpen:c,onItemClose:d,children:t.jsx(we,{scope:e.__scopeAccordion,collapsible:!0,children:t.jsx(Pe,{...a,ref:s})})})}),[Pt,B]=H(N),Pe=w.forwardRef((e,s)=>{const{__scopeAccordion:o,disabled:n,dir:i,orientation:a="vertical",...r}=e,l=w.useRef(null),c=Ye(l,s),d=bt(o),u=Ze(i)==="ltr",m=Je(e.onKeyDown,g=>{var E;if(!vt.includes(g.key))return;const x=g.target,j=d().filter(L=>{var ne;return!((ne=L.ref.current)!=null&&ne.disabled)}),y=j.findIndex(L=>L.ref.current===x),S=j.length;if(y===-1)return;g.preventDefault();let C=y;const v=0,O=S-1,b=()=>{C=y+1,C>O&&(C=v)},A=()=>{C=y-1,C<v&&(C=O)};switch(g.key){case"Home":C=v;break;case"End":C=O;break;case"ArrowRight":a==="horizontal"&&(u?b():A());break;case"ArrowDown":a==="vertical"&&b();break;case"ArrowLeft":a==="horizontal"&&(u?A():b());break;case"ArrowUp":a==="vertical"&&A();break}const U=C%S;(E=j[U].ref.current)==null||E.focus()});return t.jsx(Pt,{scope:o,disabled:n,direction:i,orientation:a,children:t.jsx(te.Slot,{scope:o,children:t.jsx(fe.div,{...r,"data-orientation":a,ref:c,onKeyDown:n?void 0:m})})})}),G="AccordionItem",[Nt,se]=H(G),Ne=w.forwardRef((e,s)=>{const{__scopeAccordion:o,value:n,...i}=e,a=B(G,o),r=Ct(G,o),l=oe(o),c=Be(),d=n&&r.value.includes(n)||!1,p=a.disabled||e.disabled;return t.jsx(Nt,{scope:o,open:d,disabled:p,triggerId:c,children:t.jsx(Ue,{"data-orientation":a.orientation,"data-state":Se(d),...l,...i,ref:s,disabled:p,open:d,onOpenChange:u=>{u?r.onItemOpen(n):r.onItemClose(n)}})})});Ne.displayName=G;var Oe="AccordionHeader",Ot=w.forwardRef((e,s)=>{const{__scopeAccordion:o,...n}=e,i=B(N,o),a=se(Oe,o);return t.jsx(fe.h3,{"data-orientation":i.orientation,"data-state":Se(a.open),"data-disabled":a.disabled?"":void 0,...n,ref:s})});Ot.displayName=Oe;var Q="AccordionTrigger",Ae=w.forwardRef((e,s)=>{const{__scopeAccordion:o,...n}=e,i=B(N,o),a=se(Q,o),r=yt(Q,o),l=oe(o);return t.jsx(te.ItemSlot,{scope:o,children:t.jsx(We,{"aria-disabled":a.open&&!r.collapsible||void 0,"data-orientation":i.orientation,id:a.triggerId,...l,...n,ref:s})})});Ae.displayName=Q;var Ie="AccordionContent",Re=w.forwardRef((e,s)=>{const{__scopeAccordion:o,...n}=e,i=B(N,o),a=se(Ie,o),r=oe(o);return t.jsx(Xe,{role:"region","aria-labelledby":a.triggerId,"data-orientation":i.orientation,...r,...n,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Re.displayName=Ie;function Se(e){return e?"open":"closed"}var At=ye,It=Ne,Rt=Ae,St=Re,kt=(e,s,o)=>({attribute:e,operator:s,value:P(o)}),ao=e=>[{value:e.gte,operator:"gte"},{value:e.lte,operator:"lte"},{value:e.gt,operator:"gt"},{value:e.lt,operator:"lt"},{value:e.eq,operator:"eq"}].filter(({value:n})=>n).map(({operator:n,value:i})=>kt(Ve,n,i)),ke=f.object({amount:f.union([f.string(),f.number()]),gte:f.union([f.string(),f.number()]).nullish(),lte:f.union([f.string(),f.number()]).nullish(),lt:f.number().nullish(),gt:f.number().nullish(),eq:f.number().nullish()}).refine(e=>e.amount!=="",{message:M("stockLocations.shippingOptions.conditionalPrices.errors.amountRequired"),path:["amount"]}).refine(e=>e.eq!==void 0||e.lt!==void 0||e.gt!==void 0?!0:e.gte!==void 0&&e.gte!==""||e.lte!==void 0&&e.lte!=="",{message:M("stockLocations.shippingOptions.conditionalPrices.errors.minOrMaxRequired"),path:["gte"]}).refine(e=>{if(e.gte!=null&&e.gte!==""&&e.lte!=null&&e.lte!==""){const s=P(e.gte),o=P(e.lte);return s<=o}return!0},{message:M("stockLocations.shippingOptions.conditionalPrices.errors.minGreaterThanMax"),path:["gte"]}),Et=ke.and(f.object({id:f.string().optional()}));function Ee(e,s){const o=e.prices;for(let n=0;n<o.length;n++)for(let i=n+1;i<o.length;i++){const a=o[n],r=o[i];if(a.amount===""||r.amount==="")continue;const l=P(a.amount),c=P(r.amount);l===c&&Mt(s,i),[{value:a.gte,type:"gte"},{value:a.lte,type:"lte"},{value:a.eq,type:"eq"},{value:a.lt,type:"lt"},{value:a.gt,type:"gt"}].forEach(p=>{if(!p.value&&p.value!==0)return;[{value:r.gte,type:"gte"},{value:r.lte,type:"lte"},{value:r.eq,type:"eq"},{value:r.lt,type:"lt"},{value:r.gt,type:"gt"}].forEach(m=>{if(!m.value&&m.value!==0)return;const g=P(p.value),x=P(m.value);g===x&&Vt(s,i,m.type)})})}}var Lt=f.object({prices:f.array(ke)}).superRefine(Ee),Tt=f.object({prices:f.array(Et)}).superRefine(Ee),Mt=(e,s)=>{e.addIssue({code:f.ZodIssueCode.custom,message:M("stockLocations.shippingOptions.conditionalPrices.errors.duplicateAmount"),path:["prices",s,"amount"]})},Vt=(e,s,o)=>{e.addIssue({code:f.ZodIssueCode.custom,message:M("stockLocations.shippingOptions.conditionalPrices.errors.overlappingConditions"),path:["prices",s,o]})},Le=h.createContext(null),lo=({children:e,onOpenConditionalPricesModal:s,onCloseConditionalPricesModal:o})=>t.jsx(Le.Provider,{value:{onOpenConditionalPricesModal:s,onCloseConditionalPricesModal:o},children:e}),Te=()=>{const e=h.useContext(Le);if(!e)throw new Error("useShippingOptionPrice must be used within a ShippingOptionPriceProvider");return e},Me=(e,s)=>{const o=s==="region"?"region_prices":"currency_prices",n=s==="region"?"conditional_region_prices":"conditional_currency_prices";return e.replace(o,n)},Dt="rule-item",D=e=>`${Dt}-${e}`,co=({info:e,variant:s})=>{const{t:o}=$(),{getValues:n,setValue:i}=Qe(),{onCloseConditionalPricesModal:a}=Te(),[r,l]=h.useState([D(0)]),{field:c,type:d,currency:p,name:u}=e,m=Me(c,d),g=et({defaultValues:{prices:n(m)||[{amount:"",gte:"",lte:null}]},resolver:tt(s==="create"?Lt:Tt)}),{fields:x,append:j,remove:y}=ot({control:g.control,name:"prices"}),S=()=>{j({amount:"",gte:"",lte:null}),l([...r,D(x.length)])},C=b=>{y(b)},v=g.handleSubmit(b=>{i(m,b.prices,{shouldDirty:!0,shouldValidate:!0,shouldTouch:!0}),a()},b=>{const A=Object.keys(b.prices||{});l(U=>{const E=new Set(U);return A.forEach(L=>{E.add(D(Number(L)))}),Array.from(E)})}),O=b=>{b.key==="Enter"&&(b.metaKey||b.ctrlKey)&&(console.log("Fired"),b.preventDefault(),b.stopPropagation(),v())};return t.jsx(_,{...g,children:t.jsx(Ke,{onSubmit:v,onKeyDown:O,className:"flex h-full flex-col",children:t.jsxs(I.Content,{children:[t.jsx(I.Header,{}),t.jsx(I.Body,{className:"size-full overflow-hidden",children:t.jsx("div",{className:"flex size-full flex-1 flex-col items-center overflow-y-auto",children:t.jsx("div",{className:"flex w-full max-w-[720px] flex-col gap-y-8 px-6 py-16",children:t.jsxs("div",{className:"flex w-full flex-col gap-y-6",children:[t.jsxs("div",{children:[t.jsx(I.Title,{asChild:!0,children:t.jsx(st,{children:o("stockLocations.shippingOptions.conditionalPrices.header",{name:u})})}),t.jsx(I.Description,{asChild:!0,children:t.jsx(F,{size:"small",className:"text-ui-fg-subtle",children:o("stockLocations.shippingOptions.conditionalPrices.description")})})]}),t.jsx(zt,{value:r,onValueChange:l,children:x.map((b,A)=>t.jsx($t,{index:A,onRemove:C,currency:p,control:g.control},b.id))}),t.jsx("div",{className:"flex items-center justify-end",children:t.jsx(W,{variant:"secondary",size:"small",type:"button",onClick:S,children:o("stockLocations.shippingOptions.conditionalPrices.actions.addPrice")})})]})})})}),t.jsx(I.Footer,{children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx(I.Close,{asChild:!0,children:t.jsx(W,{variant:"secondary",size:"small",type:"button",children:o("actions.cancel")})}),t.jsx(W,{size:"small",type:"button",onClick:v,children:o("actions.save")})]})})]})})})},zt=({children:e,value:s,onValueChange:o})=>t.jsx(At,{type:"multiple",defaultValue:[D(0)],value:s,onValueChange:o,className:"flex flex-col gap-y-3",children:e}),$t=({index:e,currency:s,onRemove:o,control:n})=>{const{t:i}=$(),a=r=>{r.stopPropagation(),o(e)};return t.jsxs(It,{value:D(e),className:he("bg-ui-bg-component shadow-elevation-card-rest rounded-lg"),children:[t.jsx(Rt,{asChild:!0,children:t.jsxs("div",{className:"group/trigger flex w-full cursor-pointer items-start justify-between gap-x-2 p-3",children:[t.jsxs("div",{className:"flex flex-1 flex-wrap items-center justify-between gap-2",children:[t.jsx("div",{className:"flex h-7 items-center",children:t.jsx(qt,{index:e,currency:s,control:n})}),t.jsx("div",{className:"flex min-h-7 items-center",children:t.jsx(Kt,{index:e,currency:s,control:n})})]}),t.jsxs("div",{className:"flex items-center gap-x-2",children:[t.jsx(J,{size:"small",variant:"transparent",className:"text-ui-fg-muted hover:text-ui-fg-subtle focus-visible:text-ui-fg-subtle",onClick:a,children:t.jsx(ut,{})}),t.jsx(J,{size:"small",variant:"transparent",className:"text-ui-fg-muted hover:text-ui-fg-subtle focus-visible:text-ui-fg-subtle",children:t.jsx(nt,{className:"transition-transform group-data-[state=open]/trigger:rotate-180"})})]})]})}),t.jsxs(St,{className:"text-ui-fg-subtle",children:[t.jsx(k,{variant:"dashed"}),t.jsx(_.Field,{control:n,name:`prices.${e}.amount`,render:({field:{value:r,onChange:l,...c}})=>t.jsx(_.Item,{children:t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(_.Label,{children:i("stockLocations.shippingOptions.conditionalPrices.rules.amount")})}),t.jsxs("div",{className:"flex flex-col gap-y-1",children:[t.jsx(_.Control,{children:t.jsx(V,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",placeholder:ee({value:"0",decimalScale:s.decimal_digits}),decimalScale:s.decimal_digits,symbol:s.symbol_native,code:s.code,value:r,onValueChange:(d,p,u)=>l(u!=null&&u.value?u==null?void 0:u.value:""),autoFocus:!0,...c})}),t.jsx(_.ErrorMessage,{})]})]})})}),t.jsx(k,{variant:"dashed"}),t.jsx(_.Field,{control:n,name:`prices.${e}.gte`,render:({field:r})=>t.jsx(le,{field:r,label:i("stockLocations.shippingOptions.conditionalPrices.rules.gte"),currency:s,placeholder:"1000"})}),t.jsx(k,{variant:"dashed"}),t.jsx(_.Field,{control:n,name:`prices.${e}.lte`,render:({field:r})=>t.jsx(le,{field:r,label:i("stockLocations.shippingOptions.conditionalPrices.rules.lte"),currency:s,placeholder:"1000"})}),t.jsx(Ft,{index:e,control:n,currency:s})]})]})},le=({field:e,label:s,currency:o,placeholder:n})=>{const i=h.useRef(null),{value:a,onChange:r,ref:l,...c}=e,d=ue(i,l),p=()=>{if(a===null){r(""),requestAnimationFrame(()=>{var m;(m=i.current)==null||m.focus()});return}r(null)},u=a===null;return t.jsx(_.Item,{children:t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsxs("div",{className:"flex h-8 items-center gap-x-1",children:[t.jsx(J,{size:"2xsmall",variant:"transparent",onClick:p,children:u?t.jsx(rt,{}):t.jsx(at,{})}),t.jsx(_.Label,{children:s})]}),!u&&t.jsxs("div",{className:"flex flex-col gap-y-1",children:[t.jsx(_.Control,{children:t.jsx(V,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",placeholder:ee({value:n,decimalScale:o.decimal_digits}),decimalScale:o.decimal_digits,symbol:o.symbol_native,code:o.code,value:a,ref:d,onValueChange:(m,g,x)=>r(x!=null&&x.value?x==null?void 0:x.value:""),...c})}),t.jsx(_.ErrorMessage,{})]})]})})},Ft=({index:e,control:s,currency:o})=>{const{t:n}=$(),i=z({control:s,name:`prices.${e}`});return i.eq==null&&i.gt==null&&i.lt==null?null:t.jsxs("div",{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"flex items-center gap-x-1 px-3 pt-3",children:[t.jsx(F,{size:"small",leading:"compact",weight:"plus",children:n("stockLocations.shippingOptions.conditionalPrices.customRules.label")}),t.jsx(lt,{content:n("stockLocations.shippingOptions.conditionalPrices.customRules.tooltip"),children:t.jsx(ct,{className:"text-ui-fg-muted"})})]}),t.jsxs("div",{children:[i.eq!=null&&t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(X,{weight:"plus",size:"small",children:n("stockLocations.shippingOptions.conditionalPrices.customRules.eq")})}),t.jsx(V,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:o.symbol_native,code:o.code,value:i.eq,disabled:!0})]}),i.gt!=null&&t.jsxs(h.Fragment,{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(X,{weight:"plus",size:"small",children:n("stockLocations.shippingOptions.conditionalPrices.customRules.gt")})}),t.jsx(V,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:o.symbol_native,code:o.code,value:i.gt,disabled:!0})]})]}),i.lt!=null&&t.jsxs(h.Fragment,{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(X,{weight:"plus",size:"small",children:n("stockLocations.shippingOptions.conditionalPrices.customRules.lt")})}),t.jsx(V,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:o.symbol_native,code:o.code,value:i.lt,disabled:!0})]})]})]})]})},qt=({index:e,currency:s,control:o})=>{const n=z({control:o,name:`prices.${e}.amount`});if(n===""||n===void 0)return t.jsx(F,{size:"small",weight:"plus",children:"-"});const i=P(n);return t.jsx(F,{size:"small",weight:"plus",children:T(i,s.code)})},Z=({children:e})=>t.jsx("div",{className:"text-ui-fg-subtle txt-small flex flex-wrap items-center gap-1.5",children:e}),Kt=({index:e,currency:s,control:o})=>{const{t:n,i18n:i}=$(),a=z({control:o,name:`prices.${e}.gte`}),r=z({control:o,name:`prices.${e}.lte`});return(()=>{const c=a?P(a):void 0,d=r?P(r):void 0;return!c&&!d?null:c&&!d?t.jsx(Z,{children:t.jsx(Y,{i18n:i,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.greaterThan",components:[t.jsx(R,{size:"2xsmall"},"attribute"),t.jsx(R,{size:"2xsmall"},"gte")],values:{attribute:n("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),gte:T(c,s.code)}})}):!c&&d?t.jsx(Z,{children:t.jsx(Y,{i18n:i,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.lessThan",components:[t.jsx(R,{size:"2xsmall"},"attribute"),t.jsx(R,{size:"2xsmall"},"lte")],values:{attribute:n("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),lte:T(d,s.code)}})}):c&&d?t.jsx(Z,{children:t.jsx(Y,{i18n:i,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.range",components:[t.jsx(R,{size:"2xsmall"},"attribute"),t.jsx(R,{size:"2xsmall"},"gte"),t.jsx(R,{size:"2xsmall"},"lte")],values:{attribute:n("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),gte:T(c,s.code),lte:T(d,s.code)}})}):null})()},ce=({context:e,code:s,header:o,type:n})=>{const[i,a]=h.useState(0),r=h.useCallback(j=>{if(j){const y=j.offsetWidth;a(y)}},[]),{field:l,control:c,renderProps:d}=ze({context:e}),p=$e({context:e}),{container:u,input:m}=d,{isAnchor:g}=u,x=qe[s.toUpperCase()];return t.jsx(it,{control:c,name:l,render:({field:j})=>t.jsx(Fe,{...u,...p,outerComponent:t.jsx(Gt,{header:o,isAnchor:g,field:l,control:c,symbolWidth:i,type:n,currency:x}),children:t.jsx(Ht,{field:j,inputProps:m,currencyInfo:x,onMeasureSymbol:r})})})},Gt=({isAnchor:e,header:s,field:o,control:n,symbolWidth:i,type:a,currency:r})=>{const{onOpenConditionalPricesModal:l}=Te(),c=h.useRef(null),d=Me(o,a),p=z({control:n,name:d});return h.useEffect(()=>{const u=m=>{var g;e&&(m.metaKey||m.ctrlKey)&&m.key.toLowerCase()==="b"&&(m.preventDefault(),(g=c.current)==null||g.click())};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[e]),t.jsxs("div",{className:"absolute inset-y-0 z-[3] flex w-fit items-center justify-center",style:{left:i?`${i+16+4}px`:void 0},children:[(p==null?void 0:p.length)>0&&!e&&t.jsx("div",{className:"flex size-[15px] items-center justify-center group-hover/container:hidden",children:t.jsx(Ce,{className:"text-ui-fg-interactive"})}),t.jsx("button",{ref:c,type:"button",className:he("hover:text-ui-fg-subtle text-ui-fg-muted transition-fg hidden size-[15px] items-center justify-center rounded-md bg-transparent group-hover/container:flex",{flex:e}),onClick:()=>l({type:a,field:o,currency:r,name:s}),children:t.jsx(ve,{})})]})},Ht=({field:e,onMeasureSymbol:s,inputProps:o,currencyInfo:n})=>{const{value:i,onChange:a,onBlur:r,ref:l,...c}=e,{ref:d,onBlur:p,onFocus:u,onChange:m,...g}=o,x=h.useCallback(v=>{const O=typeof v=="number"?v.toString():v||"";return ee({value:O,decimalScale:n.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[n]),[j,y]=h.useState(i||""),S=(v,O,b)=>{if(!v){y("");return}y(v)};h.useEffect(()=>{let v=i;isNaN(Number(i))||(v=x(v)),y(v)},[i,x]);const C=ue(d,l);return t.jsxs("div",{className:"relative flex size-full items-center",children:[t.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-0 w-fit min-w-4","aria-hidden":!0,ref:s,children:n.symbol_native}),t.jsx(dt,{...c,...g,ref:C,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-[60px] text-right outline-none",value:j||void 0,onValueChange:S,formatValueOnBlur:!0,onBlur:()=>{r(),p(),m(j,i)},onFocus:u,decimalScale:n.decimal_digits,decimalsLimit:n.decimal_digits,autoComplete:"off",tabIndex:-1})]})},Bt=de(),uo=({name:e,currencies:s=[],regions:o=[],pricePreferences:n=[]})=>{const{t:i}=$();return h.useMemo(()=>[Bt.column({id:"name",name:i("fields.name"),disableHiding:!0,header:i("fields.name"),cell:a=>t.jsx(De.ReadonlyCell,{context:a,children:e})}),...Ut({currencies:s,regions:o,pricePreferences:n,getFieldName:(a,r)=>{var l;return(l=a.column.id)!=null&&l.startsWith("currency_prices")?`currency_prices.${r}`:`region_prices.${r}`},t:i})],[i,s,o,n,e])},Ut=({currencies:e,regions:s,pricePreferences:o,getFieldName:n,t:i})=>{const a=de();return[...(e==null?void 0:e.map(r=>{const l=o==null?void 0:o.find(d=>d.attribute==="currency_code"&&d.value===r),c=i("fields.priceTemplate",{regionOrCurrency:r.toUpperCase()});return a.column({id:`currency_prices.${r}`,name:i("fields.priceTemplate",{regionOrCurrency:r.toUpperCase()}),field:d=>n(d,r),type:"number",header:()=>t.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[t.jsx("span",{className:"truncate",title:c,children:c}),t.jsx(ie,{includesTax:l==null?void 0:l.is_tax_inclusive})]}),cell:d=>t.jsx(ce,{type:"currency",header:c,code:r,context:d})})}))??[],...(s==null?void 0:s.map(r=>{const l=o==null?void 0:o.find(d=>d.attribute==="region_id"&&d.value===r.id),c=i("fields.priceTemplate",{regionOrCurrency:r.name});return a.column({id:`region_prices.${r.id}`,name:i("fields.priceTemplate",{regionOrCurrency:r.name}),field:d=>n(d,r.id),type:"number",header:()=>t.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[t.jsx("span",{className:"truncate",title:c,children:c}),t.jsx(ie,{includesTax:l==null?void 0:l.is_tax_inclusive})]}),cell:d=>(e==null?void 0:e.find(u=>u===r.currency_code))?t.jsx(ce,{type:"region",header:c,code:r.currency_code,context:d}):null})}))??[]]};export{co as C,lo as S,Et as U,ke as a,ao as b,uo as u};
