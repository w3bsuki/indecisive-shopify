import{D as C}from"./chunk-HTSFT44S-CJUe0A-W.js";import{C as I}from"./chunk-SCBXRJPV-Dm4VU2Fj.js";import{K as L}from"./chunk-6HTZNHPT-Cb4WOymP.js";import{b as d,u as z}from"./chunk-4TC5YS65-CpYb4tqr.js";import{b as F,R as M,aT as S,j as e,H as A,a8 as B,d5 as O,t as y,v as s,I as a,B as _,ab as w,a2 as T,a4 as i}from"./index-DuPjH3KB.js";import"./triangles-mini-DJ6fWUKd.js";import"./prompt-BdJTBwZe.js";var D=T({address_1:i().min(1),address_2:i().optional(),country_code:i().min(2).max(2),city:i().optional(),postal_code:i().optional(),province:i().optional(),company:i().optional(),phone:i().optional()});function N({order:o}){var m,j,u,h,p,b,g,f;const{t:l}=F(),{handleSuccess:t}=z(),n=B({defaultValues:{address_1:((m=o.billing_address)==null?void 0:m.address_1)||"",address_2:((j=o.billing_address)==null?void 0:j.address_2)||"",city:((u=o.billing_address)==null?void 0:u.city)||"",company:((h=o.billing_address)==null?void 0:h.company)||"",country_code:((p=o.billing_address)==null?void 0:p.country_code)||"",phone:((b=o.billing_address)==null?void 0:b.phone)||"",postal_code:((g=o.billing_address)==null?void 0:g.postal_code)||"",province:((f=o.billing_address)==null?void 0:f.province)||""},resolver:w(D)}),{mutateAsync:c,isPending:x}=O(o.id),v=n.handleSubmit(async r=>{try{await c({billing_address:r}),y.success(l("orders.edit.billingAddress.requestSuccess")),t()}catch(E){y.error(E.message)}});return e.jsx(d.Form,{form:n,children:e.jsxs(L,{onSubmit:v,className:"flex size-full flex-col overflow-hidden",children:[e.jsx(d.Body,{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(s.Field,{control:n.control,name:"address_1",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.address")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"address_2",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.address2")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"postal_code",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.postalCode")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"city",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.city")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"country_code",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:l("fields.country")}),e.jsx(s.Control,{children:e.jsx(I,{...r,disabled:!0})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"province",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.state")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"company",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.company")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:n.control,name:"phone",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:l("fields.phone")}),e.jsx(s.Control,{children:e.jsx(a,{size:"small",...r})}),e.jsx(s.ErrorMessage,{})]})})]})}),e.jsx(d.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(d.Close,{asChild:!0,children:e.jsx(_,{variant:"secondary",size:"small",children:l("actions.cancel")})}),e.jsx(_,{isLoading:x,type:"submit",variant:"primary",size:"small",disabled:!!Object.keys(n.formState.errors||{}).length,children:l("actions.save")})]})})]})})}var V=()=>{const{t:o}=F(),l=M(),{order:t,isPending:n,isError:c,error:x}=S(l.id,{fields:C});if(!n&&c)throw x;return e.jsxs(d,{children:[e.jsx(d.Header,{children:e.jsx(A,{children:o("orders.edit.billingAddress.title")})}),t&&e.jsx(N,{order:t})]})};export{V as Component};
